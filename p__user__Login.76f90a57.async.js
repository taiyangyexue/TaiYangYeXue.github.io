(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(S){S.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},64057:function(S,T,a){"use strict";a.r(T),a.d(T,{default:function(){return se}});var le=a(18106),y=a(47428),oe=a(34792),Z=a(48086),m=a(8870),x=a(3182),A=a(2824),ge=a(17462),$=a(76772),E=a(94043),o=a.n(E),Y=a(36108),G=a(48107),W=a(39464),K=a(89366),N=a(2603),R=a(29985),b=a(67294),V=a(99861),C=a(5966),J=a(16434),Q=a(63434),t=a(21010),X=a(78874),k=a(97544),e=a(85893),w=function(){var h=(0,t.YB)(),c=h.formatMessage({id:"app.copyright.produced",defaultMessage:"\u8682\u8681\u96C6\u56E2\u4F53\u9A8C\u6280\u672F\u90E8\u51FA\u54C1"}),f=new Date().getFullYear();return(0,e.jsx)(k.Z,{copyright:"".concat(f," ").concat(c),links:[{key:"Ant Design Pro",title:"Ant Design Pro",href:"https://pro.ant.design",blankTarget:!0},{key:"github",title:(0,e.jsx)(X.Z,{}),href:"https://github.com/ant-design/ant-design-pro",blankTarget:!0},{key:"Ant Design",title:"Ant Design",href:"https://ant.design",blankTarget:!0}]})},q=a(36571);function _(h,c){return B.apply(this,arguments)}function B(){return B=(0,x.Z)(o().mark(function h(c,f){return o().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,t.WY)("/api/login/captcha",(0,m.Z)({method:"GET",params:(0,m.Z)({},c)},f||{})));case 1:case"end":return v.stop()}},h)})),B.apply(this,arguments)}var ee=a(34687),g=a.n(ee),I=function(c){var f=c.content;return(0,e.jsx)($.Z,{style:{marginBottom:24},message:f,type:"error",showIcon:!0})},ae=function(){var c=(0,b.useState)({}),f=(0,A.Z)(c,2),L=f[0],v=f[1],te=(0,b.useState)("account"),O=(0,A.Z)(te,2),M=O[0],re=O[1],P=(0,t.tT)("@@initialState"),j=P.initialState,ne=P.setInitialState,i=(0,t.YB)(),ie=function(){var p=(0,x.Z)(o().mark(function n(){var u,l;return o().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,j==null||(u=j.fetchUserInfo)===null||u===void 0?void 0:u.call(j);case 2:if(l=s.sent,!l){s.next=6;break}return s.next=6,ne(function(F){return(0,m.Z)((0,m.Z)({},F),{},{currentUser:l})});case 6:case"end":return s.stop()}},n)}));return function(){return p.apply(this,arguments)}}(),ue=function(){var p=(0,x.Z)(o().mark(function n(u){var l,d,s,F,z,U;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,q.x4)((0,m.Z)((0,m.Z)({},u),{},{type:M}));case 3:if(l=r.sent,l.status!=="ok"){r.next=15;break}return d=i.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),Z.default.success(d),r.next=9,ie();case 9:if(t.m8){r.next=11;break}return r.abrupt("return");case 11:return s=t.m8.location.query,F=s,z=F.redirect,t.m8.push(z||"/"),r.abrupt("return");case 15:console.log(l),v(l),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(0),U=i.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),Z.default.error(U);case 23:case"end":return r.stop()}},n,null,[[0,19]])}));return function(u){return p.apply(this,arguments)}}(),D=L.status,H=L.type;return(0,e.jsxs)("div",{className:g().container,children:[(0,e.jsx)("div",{className:g().lang,"data-lang":!0}),(0,e.jsx)("div",{className:g().content,children:(0,e.jsxs)(V.Z,{logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:i.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,e.jsx)(t._H,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(Y.Z,{className:g().icon},"AlipayCircleOutlined"),(0,e.jsx)(G.Z,{className:g().icon},"TaobaoCircleOutlined"),(0,e.jsx)(W.Z,{className:g().icon},"WeiboCircleOutlined")],onFinish:function(){var p=(0,x.Z)(o().mark(function n(u){return o().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,ue(u);case 2:case"end":return d.stop()}},n)}));return function(n){return p.apply(this,arguments)}}(),children:[(0,e.jsxs)(y.Z,{activeKey:M,onChange:re,children:[(0,e.jsx)(y.Z.TabPane,{tab:i.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,e.jsx)(y.Z.TabPane,{tab:i.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),D==="error"&&H==="account"&&(0,e.jsx)(I,{content:i.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),M==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(K.Z,{className:g().prefixIcon})},placeholder:i.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(C.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(N.Z,{className:g().prefixIcon})},placeholder:i.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),D==="error"&&H==="mobile"&&(0,e.jsx)(I,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),M==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(R.Z,{className:g().prefixIcon})},name:"mobile",placeholder:i.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(t._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)(J.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(N.Z,{className:g().prefixIcon})},captchaProps:{size:"large"},placeholder:i.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(n,u){return n?"".concat(u," ").concat(i.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):i.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var p=(0,x.Z)(o().mark(function n(u){var l;return o().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,_({phone:u});case 2:if(l=s.sent,l!==!1){s.next=5;break}return s.abrupt("return");case 5:Z.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return s.stop()}},n)}));return function(n){return p.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(Q.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(t._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},children:(0,e.jsx)(t._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,e.jsx)(w,{})]})},se=ae}}]);
