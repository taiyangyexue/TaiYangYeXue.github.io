(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function($){$.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},45485:function($,A,r){"use strict";r.r(A),r.d(A,{default:function(){return ce}});var me=r(18106),T=r(47428),he=r(34792),Z=r(48086),y=r(8870),j=r(3182),O=r(2824),ve=r(17462),K=r(76772),V=r(94043),g=r.n(V),J=r(36108),Q=r(48107),X=r(39464),q=r(89366),E=r(2603),_=r(29985),I=r(67294),ee=r(99861),S=r(5966),ae=r(16434),re=r(63434),i=r(21010),te=r(78874),ne=r(97544),e=r(85893),se=function(){var t=(0,i.YB)(),n=t.formatMessage({id:"app.copyright.produced",defaultMessage:"\u8682\u8681\u96C6\u56E2\u4F53\u9A8C\u6280\u672F\u90E8\u51FA\u54C1"}),s=new Date().getFullYear();return(0,e.jsx)(ne.Z,{copyright:"".concat(s," ").concat(n),links:[{key:"Ant Design Pro",title:"Ant Design Pro",href:"https://pro.ant.design",blankTarget:!0},{key:"github",title:(0,e.jsx)(te.Z,{}),href:"https://github.com/ant-design/ant-design-pro",blankTarget:!0},{key:"Ant Design",title:"Ant Design",href:"https://ant.design",blankTarget:!0}]})};function ye(t){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/currentUser",_objectSpread({method:"GET"},n||{})));case 1:case"end":return a.stop()}},t)})),b.apply(this,arguments)}function je(t){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/login/outLogin",_objectSpread({method:"POST"},n||{})));case 1:case"end":return a.stop()}},t)})),C.apply(this,arguments)}function ue(t,n){return L.apply(this,arguments)}function L(){return L=(0,j.Z)(g().mark(function t(n,s){return g().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,i.WY)("/api/login/account",(0,y.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return l.stop()}},t)})),L.apply(this,arguments)}function Me(t){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/notices",_objectSpread({method:"GET"},n||{})));case 1:case"end":return a.stop()}},t)})),R.apply(this,arguments)}function Fe(t,n){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime.mark(function t(n,s){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/rule",_objectSpread({method:"GET",params:_objectSpread({},n)},s||{})));case 1:case"end":return l.stop()}},t)})),B.apply(this,arguments)}function xe(t){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/rule",_objectSpread({method:"PUT"},n||{})));case 1:case"end":return a.stop()}},t)})),w.apply(this,arguments)}function Te(t){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/rule",_objectSpread({method:"POST"},n||{})));case 1:case"end":return a.stop()}},t)})),G.apply(this,arguments)}function Ze(t){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){return _regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/rule",_objectSpread({method:"DELETE"},n||{})));case 1:case"end":return a.stop()}},t)})),N.apply(this,arguments)}function ie(t,n){return P.apply(this,arguments)}function P(){return P=(0,j.Z)(g().mark(function t(n,s){return g().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,i.WY)("/api/login/captcha",(0,y.Z)({method:"GET",params:(0,y.Z)({},n)},s||{})));case 1:case"end":return l.stop()}},t)})),P.apply(this,arguments)}var le=r(34687),m=r.n(le),U=function(n){var s=n.content;return(0,e.jsx)(K.Z,{style:{marginBottom:24},message:s,type:"error",showIcon:!0})},oe=function(){var n=(0,I.useState)({}),s=(0,O.Z)(n,2),a=s[0],l=s[1],ge=(0,I.useState)("account"),D=(0,O.Z)(ge,2),M=D[0],pe=D[1],H=(0,i.tT)("@@initialState"),F=H.initialState,de=H.setInitialState,p=(0,i.YB)(),Se=function(){var v=(0,j.Z)(g().mark(function c(){var d,f;return g().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,F==null||(d=F.fetchUserInfo)===null||d===void 0?void 0:d.call(F);case 2:if(f=u.sent,!f){u.next=6;break}return u.next=6,de(function(x){return(0,y.Z)((0,y.Z)({},x),{},{currentUser:f})});case 6:case"end":return u.stop()}},c)}));return function(){return v.apply(this,arguments)}}(),fe=function(){var v=(0,j.Z)(g().mark(function c(d){var f,h,u,x,k,W;return g().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,ue((0,y.Z)((0,y.Z)({},d),{},{type:M}));case 3:if(f=o.sent,f.status!=="ok"){o.next=13;break}if(h=p.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),Z.default.success(h),i.m8){o.next=9;break}return o.abrupt("return");case 9:return u=i.m8.location.query,x=u,k=x.redirect,i.m8.push(k||"/"),o.abrupt("return");case 13:console.log(f),l(f),o.next=21;break;case 17:o.prev=17,o.t0=o.catch(0),W=p.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),Z.default.error(W);case 21:case"end":return o.stop()}},c,null,[[0,17]])}));return function(d){return v.apply(this,arguments)}}(),z=a.status,Y=a.type;return(0,e.jsxs)("div",{className:m().container,children:[(0,e.jsx)("div",{className:m().lang,"data-lang":!0}),(0,e.jsx)("div",{className:m().content,children:(0,e.jsxs)(ee.Z,{logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:p.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,e.jsx)(i._H,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(J.Z,{className:m().icon},"AlipayCircleOutlined"),(0,e.jsx)(Q.Z,{className:m().icon},"TaobaoCircleOutlined"),(0,e.jsx)(X.Z,{className:m().icon},"WeiboCircleOutlined")],onFinish:function(){var v=(0,j.Z)(g().mark(function c(d){return g().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,fe(d);case 2:case"end":return h.stop()}},c)}));return function(c){return v.apply(this,arguments)}}(),children:[(0,e.jsxs)(T.Z,{activeKey:M,onChange:pe,children:[(0,e.jsx)(T.Z.TabPane,{tab:p.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,e.jsx)(T.Z.TabPane,{tab:p.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),z==="error"&&Y==="account"&&(0,e.jsx)(U,{content:p.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),M==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(q.Z,{className:m().prefixIcon})},placeholder:p.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,e.jsx)(i._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(S.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(E.Z,{className:m().prefixIcon})},placeholder:p.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,e.jsx)(i._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),z==="error"&&Y==="mobile"&&(0,e.jsx)(U,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),M==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(_.Z,{className:m().prefixIcon})},name:"mobile",placeholder:p.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,e.jsx)(i._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(i._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)(ae.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(E.Z,{className:m().prefixIcon})},captchaProps:{size:"large"},placeholder:p.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(c,d){return c?"".concat(d," ").concat(p.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):p.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(i._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var v=(0,j.Z)(g().mark(function c(d){var f;return g().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,ie({phone:d});case 2:if(f=u.sent,f!==!1){u.next=5;break}return u.abrupt("return");case 5:Z.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return u.stop()}},c)}));return function(c){return v.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(re.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(i._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},children:(0,e.jsx)(i._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,e.jsx)(se,{})]})},ce=oe}}]);
